@layer global, theme, cube, custom;

@import "./abstracts/_spacing.css";
@import "./abstracts/_theme.css";
@import "./abstracts/_typography.css";

@import "./base/_reset.css";

@import "./base/_button.css";
@import "./base/_code.css";
@import "./base/_details.css";
@import "./base/_form.css";
@import "./base/_nav.css";
@import "./base/_table.css";
@import "./base/_tooltip.css";

@import "./compositions/_cluster.css";
@import "./compositions/_frame.css";
@import "./compositions/_grid.css";
@import "./compositions/_reel.css";
@import "./compositions/_repel.css";
@import "./compositions/_sidebar.css";
@import "./compositions/_switcher.css";

@import "./blocks/_alert.css";
@import "./blocks/_breadcrumb.css";
@import "./blocks/_callout.css";
@import "./blocks/_card.css";
@import "./blocks/_footnotes.css";
@import "./blocks/_hero.css";
@import "./blocks/_pictogram.css";
@import "./blocks/_prose.css";

@import "./utilities/_animation.css";
@import "./utilities/_border.css";
@import "./utilities/_color.css";
@import "./utilities/_flow.css";
@import "./utilities/_gap.css";
@import "./utilities/_region.css";
@import "./utilities/_shadow.css";
@import "./utilities/_spacing.css";
@import "./utilities/_typography.css";
@import "./utilities/_visibility.css";
@import "./utilities/_wide.css";
@import "./utilities/_wrapper.css";

@layer theme {
  :root {
    /* Palette */
    --background: var(--color--white);
    --color: var(--color--black);
    --color--accent: #e54;
    --color--brand: #04b;
    --color--status-ok: #2b8;
    --color--status-ko: var(--color--accent);
    --color--outline: var(--color--brand);
    --color--highlight: #efc;
  }

  /* Buttons */
  button,
  input[type="submit"],
  input[type="reset"],
  input[type="button"],
  .button {
    --button__background-color: var(--color--accent);
    --button__border-color: var(--color--black);
    --button__color: var(--color--black);
    --button__shadow: 0 0 0 0 var(--color--black);
    --button__transform: translateY(0);

    background-color: var(--button__background-color);
    background-position: center;
    border: var(--border) solid var(--button__border-color);
    border-radius: var(--border-radius);
    box-shadow: var(--button__shadow);
    color: var(--button__color);
    font-family: var(--font-family);
    font-weight: var(--font-weight--bold);
    letter-spacing: 0.05em;
    line-height: var(--line-height);
    transform: var(--button__transform);
    transition: all var(--transition);
  }

  button:hover:not([role="combobox"]),
  button:focus:not([role="combobox"]),
  input[type="submit"]:hover,
  input[type="submit"]:focus,
  input[type="reset"]:hover,
  input[type="reset"]:focus,
  input[type="button"]:hover,
  input[type="button"]:focus,
  .button:hover,
  .button:focus {
    --button__transform: translateY(-0.25em);
    --button__box-shadow: 0 0.25em 0 0 var(--color--black);
  }

  button:active,
  input[type="submit"]:active,
  input[type="reset"]:active,
  input[type="button"]:active,
  .button:active {
    --button__transform: translateY(0);
    --button__box-shadow: 0 0 0 0 var(--color--black);
  }

  button:disabled,
  input[type="submit"]:disabled,
  input[type="reset"]:disabled, 
  input[type="button"]:disabled,
  /* For disabled link styles, used with role=link (https://www.scottohara.me/blog/2021/05/28/disabled-links.html) */
  .button[aria-disabled="true"] {
    --button__background-color: var(--color--neutral-200);
    --button__border: var(--border) solid var(--color--neutral-800);
    --button__color: var(--color--neutral-800);

    transform: none;
    filter: none;
    box-shadow: none;
  }

  /* Exceptions @see https://cube.fyi/exception.html */

  button[data-variant="outline"],
  input[type="submit"][data-variant="outline"],
  input[type="reset"][data-variant="outline"],
  input[type="button"][data-variant="outline"],
  .button[data-variant="outline"] {
    --button__background-color: var(
      --button__background-color--outline,
      transparent
    );
    --button__border-color: var(--button__border-color--outline);
    --button__color: var(--button__color--outline);
  }

  button[data-variant="naked"],
  input[type="submit"][data-variant="naked"],
  input[type="reset"][data-variant="naked"],
  input[type="button"][data-variant="naked"],
  .button[data-variant="naked"] {
    --button__background-color: transparent;
    --button__border-color: transparent;
    --button__color: inherit;
  }

  pre {
    background: var(--color--neutral-100);
  }

  code {
    background: var(--color--neutral-100);
    color: var(--color-accent);
  }

  pre code {
    color: var(--color--black);
  }

  details {
    background: var(--color--neutral-200);
    border-radius: var(--border-radius);
  }

  fieldset {
    border: solid var(--border) var(--color--neutral-300);
    border-radius: var(--border-radius);
  }

  legend {
    background-color: var(--color--white);
  }

  button[role="combobox"],
  input[type="email"],
  input[type="number"],
  input[type="password"],
  input[type="search"],
  input[type="tel"],
  input[type="text"],
  input[type="url"],
  textarea,
  select {
    background: var(--color--white);
    border: solid var(--border) var(--color--black);
    border-radius: var(--border-radius);
    color: var(--color--black);
  }

  input[type="checkbox"],
  input[type="radio"] {
    border: solid var(--border) var(--color--black);
  }

  input[type="checkbox"] {
    border-radius: var(--border-radius);
  }

  .breadcrumb a {
    color: var(--color--white);
  }

  .breadcrumb [aria-current="page"] {
    color: var(--color--white);
    font-weight: normal;
  }

  .callout[data-variant="brand"] {
    color: var(--color--brand);
    border: dotted 0.125rem var(--color--brand);
  }

  .callout[data-variant="brand"] > * {
    color: var(--color--brand);
  }

  @media screen and (prefers-color-scheme: dark) {
    :root {
      --background: var(--color--black);
      --color: var(--color--neutral-100);
    }
  }
}
